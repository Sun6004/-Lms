<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper
	namespace="kr.or.hku.classroom.mapper.ClassroomListMapper">

	<select id="selectList" resultType="classroomVO">
		SELECT
		b.sub_nm
		, d.pro_nm
		FROM
		student a
		JOIN course_regist c ON a.std_no = c.std_no
		JOIN lecture_aply e ON c.lecap_no = e.lecap_no
		JOIN subject b ON e.sub_no = b.sub_no
		JOIN professor d ON e.pro_no = d.pro_no
		WHERE
		a.std_no = #{stdNo}
	</select>

	<select id="proSelectList" parameterType="String" resultType="lectureAplyVO">
		SELECT
			  c.lecap_no
			, b.sub_nm
			, c.lecap_yr
			, c.lecap_sem
		FROM professor a
		JOIN lecture_aply c ON c.pro_no = a.pro_no
		JOIN subject b ON c.sub_no = b.sub_no
		WHERE
			a.pro_no = #{proNo}
		and c.aprv_stts_cd like 'appv'
		and c.lecap_yr like TO_CHAR(sysdate, 'YYYY')
		AND c.lecap_sem = CASE
                  WHEN TO_NUMBER(TO_CHAR(sysdate, 'MM')) BETWEEN 2 AND 7 THEN 1
                  WHEN TO_NUMBER(TO_CHAR(sysdate, 'MM')) BETWEEN 8 AND 12 THEN 2
                  ELSE 0
                 END
	</select>
	
	

</mapper>